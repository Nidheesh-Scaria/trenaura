
<head>
    
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  {{!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"> --}}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css"/>
  
  <link rel="stylesheet" href="/css/adminCustomers.css">
  <style>
    .refresh-btn {
        background-color: var(--primary-color);
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        display: flex;
        align-items: center;
        transition: all 0.3s;
        background-color: #1d1c8a;
    }

    .refresh-btn i {
        margin-right: 5px;
    }

    .refresh-btn:hover {
        background-color:  #1916b3;
    }


    .table-container a{
      text-decoration: none;
    }
    .edit{
     color: #1916b3;
    }
    .delete{
      color: red;
    }
  
  


  /* Edit Modal Styles - Centered and Stable */
#editCategoryModal.modal {
  
  align-items: center;
  justify-content: center;
  background-color: rgba(0, 0, 0, 0.5);
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1050;
  overflow-y: auto;
}

#editCategoryModal .modal-dialog {
  position: relative;
  width: auto;
  max-width: 600px;
  margin: 0 auto;
  pointer-events: none;
  transition: none !important; /* Disable any movement transitions */
  transform: none !important; /* Disable any transform animations */
}

#editCategoryModal .modal-content {
  position: relative;
  display: flex;
  flex-direction: column;
  width: 100%;
  pointer-events: auto;
  background-color: #fff;
  background-clip: padding-box;
  border: 1px solid rgba(0, 0, 0, 0.2);
  border-radius: 0.3rem;
  outline: 0;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

/* Modal Header */
#editCategoryModal .modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  border-bottom: 1px solid #e9ecef;
  background-color: #4361ee;
  color: white;
}

#editCategoryModal .modal-title {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 500;
}

#editCategoryModal .btn-close {
  padding: 0.5rem;
  margin: -0.5rem -0.5rem -0.5rem auto;
  background-color: transparent;
  border: 0;
  color: white;
  font-size: 1rem;
  cursor: pointer;
  opacity: 0.8;
}

#editCategoryModal .btn-close:hover {
  opacity: 1;
}

/* Modal Body */
#editCategoryModal .modal-body {
  position: relative;
  flex: 1 1 auto;
  padding: 1.5rem;
}

#editCategoryModal .form-label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
}

#editCategoryModal .form-control {
  display: block;
  width: 100%;
  padding: 0.375rem 0.75rem;
  font-size: 1rem;
  line-height: 1.5;
  color: #495057;
  background-color: #fff;
  background-clip: padding-box;
  border: 1px solid #ced4da;
  border-radius: 0.25rem;
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

#editCategoryModal .form-control:focus {
  border-color: #4361ee;
  outline: 0;
  box-shadow: 0 0 0 0.2rem rgba(67, 97, 238, 0.25);
}

/* Modal Footer */
#editCategoryModal .modal-footer {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding: 1rem;
  border-top: 1px solid #e9ecef;
}

#editCategoryModal .btn {
  display: inline-block;
  font-weight: 400;
  text-align: center;
  white-space: nowrap;
  vertical-align: middle;
  user-select: none;
  border: 1px solid transparent;
  padding: 0.375rem 0.75rem;
  font-size: 1rem;
  line-height: 1.5;
  border-radius: 0.25rem;
  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out;
}

#editCategoryModal .btn-secondary {
  color: #fff;
  background-color: #6c757d;
  border-color: #6c757d;
  margin-right: 0.5rem;
}

#editCategoryModal .btn-primary {
  color: #fff;
  background-color: #4361ee;
  border-color: #4361ee;
}
.form-select {
   border: 1px solid #ced4da;
   border-radius: 4px;
   padding: 8px 12px;
   width: 100%;
 }


/* Responsive Adjustments */
@media (max-width: 768px) {
  #editCategoryModal .modal-dialog {
    max-width: 95%;
    margin: 0.5rem auto;
  }
}

/* Disable any movement animations */
.modal.fade .modal-dialog {
  transition: none !important;
  transform: none !important;
}


/* Delete Modal Styles - Fixed Centered Position */
#deleteCategoryModal.modal {
  
  align-items: center;
  justify-content: center;
  background-color: rgba(0, 0, 0, 0.5);
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1050;
  overflow-y: auto;
}

#deleteCategoryModal .modal-dialog {
  position: relative;
  width: auto;
  max-width: 500px;
  margin: 0 auto;
  pointer-events: none;
  transition: none !important;
  transform: none !important;
}

#deleteCategoryModal .modal-content {
  position: relative;
  display: flex;
  flex-direction: column;
  width: 100%;
  pointer-events: auto;
  background-color: #fff;
  background-clip: padding-box;
  border: 1px solid rgba(0, 0, 0, 0.2);
  border-radius: 0.3rem;
  outline: 0;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  border-top: 4px solid #dc3545;
}

/* Modal Header */
#deleteCategoryModal .modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  border-bottom: 1px solid #e9ecef;
}

#deleteCategoryModal .modal-title {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 500;
  color: #dc3545;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

#deleteCategoryModal .modal-title::before {
  content: "âš ";
  font-size: 1.2em;
}

#deleteCategoryModal .btn-close {
  padding: 0.5rem;
  margin: -0.5rem -0.5rem -0.5rem auto;
  background-color: transparent;
  border: 0;
  font-size: 1rem;
  cursor: pointer;
  opacity: 0.7;
}

#deleteCategoryModal .btn-close:hover {
  opacity: 1;
}

/* Modal Body */
#deleteCategoryModal .modal-body {
  position: relative;
  flex: 1 1 auto;
  padding: 1.5rem;
  text-align: center;
}

#deleteCategoryModal .modal-body p {
  margin: 0;
  font-size: 1.05rem;
  color: #6c757d;
}

/* Modal Footer */
#deleteCategoryModal .modal-footer {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
  border-top: 1px solid #e9ecef;
  gap: 1rem;
}

#deleteCategoryModal .btn {
  display: inline-block;
  font-weight: 500;
  text-align: center;
  white-space: nowrap;
  vertical-align: middle;
  user-select: none;
  border: 1px solid transparent;
  padding: 0.5rem 1.25rem;
  font-size: 1rem;
  line-height: 1.5;
  border-radius: 0.25rem;
  transition: all 0.15s ease;
  min-width: 100px;
}

#deleteCategoryModal .btn-secondary {
  color: #fff;
  background-color: #6c757d;
  border-color: #6c757d;
}

#deleteCategoryModal .btn-danger {
  color: #fff;
  background-color: #dc3545;
  border-color: #dc3545;
  position: relative;
  overflow: hidden;
}

#deleteCategoryModal .btn-danger:hover {
  background-color: #c82333;
  border-color: #bd2130;
}

/* Disable any movement animations */
.modal.fade .modal-dialog {
  transition: none !important;
  transform: none !important;
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  #deleteCategoryModal .modal-dialog {
    max-width: 95%;
    margin: 0.5rem auto;
  }
  
  #deleteCategoryModal .modal-footer {
    flex-direction: column-reverse;
    gap: 0.5rem;
  }
  
  #deleteCategoryModal .btn {
    width: 100%;
  }
}

@media (max-width: 576px) {
  #deleteCategoryModal .modal-title {
    font-size: 1.1rem;
  }
  
  #deleteCategoryModal .modal-body p {
    font-size: 0.95rem;
  }
}

/* Add Brand Modal Styles */
#addBrandModal {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.modal-dialog {
  max-width: 500px;
  margin: 1.75rem auto;
}

.modal-content {
  position: relative;
  display: flex;
  flex-direction: column;
  width: 100%;
  background-color: #fff;
  background-clip: padding-box;
  border: 1px solid rgba(0, 0, 0, 0.2);
  border-radius: 0.5rem;
  outline: 0;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.modal-header {
  display: flex;
  flex-shrink: 0;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1rem;
  border-bottom: 1px solid #dee2e6;
  border-top-left-radius: calc(0.5rem - 1px);
  border-top-right-radius: calc(0.5rem - 1px);
  background-color: #f8f9fa;
}

.modal-title {
  margin: 0;
  line-height: 1.5;
  font-size: 1.25rem;
  font-weight: 600;
  color: #333;
}

.btn-close {
  padding: 0.5rem;
  margin: -0.5rem -0.5rem -0.5rem auto;
  background-color: transparent;
  border: 0;
  border-radius: 0.25rem;
  opacity: 0.5;
  font-size: 1rem;
  font-weight: bold;
  cursor: pointer;
  transition: opacity 0.15s ease;
}

.btn-close:hover {
  opacity: 1;
  color: #dc3545;
}

.modal-body {
  position: relative;
  flex: 1 1 auto;
  padding: 1rem;
}

.mb-3 {
  margin-bottom: 1rem !important;
}

.form-label {
  display: inline-block;
  margin-bottom: 0.5rem;
  font-weight: 500;
  color: #495057;
}

.form-control {
  display: block;
  width: 100%;
  padding: 0.375rem 0.75rem;
  font-size: 1rem;
  font-weight: 400;
  line-height: 1.5;
  color: #212529;
  background-color: #fff;
  background-clip: padding-box;
  border: 1px solid #ced4da;
  border-radius: 0.375rem;
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.form-control:focus {
  color: #212529;
  background-color: #fff;
  border-color: #86b7fe;
  outline: 0;
  box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}

textarea.form-control {
  min-height: 100px;
  resize: vertical;
}

.modal-footer {
  display: flex;
  flex-wrap: wrap;
  flex-shrink: 0;
  align-items: center;
  justify-content: flex-end;
  padding: 0.75rem;
  border-top: 1px solid #dee2e6;
  border-bottom-right-radius: calc(0.5rem - 1px);
  border-bottom-left-radius: calc(0.5rem - 1px);
}

.btn {
  display: inline-block;
  font-weight: 400;
  line-height: 1.5;
  color: #212529;
  text-align: center;
  text-decoration: none;
  vertical-align: middle;
  cursor: pointer;
  user-select: none;
  background-color: transparent;
  border: 1px solid transparent;
  padding: 0.375rem 0.75rem;
  font-size: 1rem;
  border-radius: 0.375rem;
  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, 
              border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.btn-secondary {
  color: #fff;
  background-color: #6c757d;
  border-color: #6c757d;
}

.btn-secondary:hover {
  color: #fff;
  background-color: #5c636a;
  border-color: #565e64;
}

.btn-primary {
  color: #fff;
  background-color: #0d6efd;
  border-color: #0d6efd;
}

.btn-primary:hover {
  color: #fff;
  background-color: #0b5ed7;
  border-color: #0a58ca;
}

.error-message {
  color: #dc3545;
  font-size: 0.875rem;
  margin-top: 0.25rem;
}



/* Delete Brand Modal Styles */
#deleteBrandModal {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

#deleteBrandModal .modal-dialog {
  max-width: 500px;
  margin: 1.75rem auto;
}

#deleteBrandModal .modal-content {
  border: none;
  border-radius: 0.5rem;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
}

#deleteBrandModal .modal-header {
  background-color: #f8f9fa;
  border-bottom: 1px solid #dee2e6;
  border-top-left-radius: 0.5rem;
  border-top-right-radius: 0.5rem;
  padding: 1rem 1.5rem;
}

#deleteBrandModal .modal-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: #dc3545; /* Red color for delete warning */
  margin: 0;
}

#deleteBrandModal .btn-close {
  padding: 0.5rem;
  margin: -0.5rem -0.5rem -0.5rem auto;
  background-size: 0.75rem;
}

#deleteBrandModal .modal-body {
  padding: 1.5rem;
  color: #495057;
  font-size: 1rem;
  line-height: 1.5;
}

#deleteBrandModal .modal-body p {
  margin: 0;
}

#deleteBrandModal .modal-footer {
  border-top: 1px solid #dee2e6;
  padding: 1rem 1.5rem;
  justify-content: flex-end;
}

#deleteBrandModal .btn {
  padding: 0.5rem 1rem;
  font-weight: 500;
  border-radius: 0.375rem;
  transition: all 0.2s ease;
}

#deleteBrandModal .btn-secondary {
  background-color: #6c757d;
  border-color: #6c757d;
  color: white;
}

#deleteBrandModal .btn-secondary:hover {
  background-color: #5c636a;
  border-color: #565e64;
}

#deleteBrandModal .btn-danger {
  background-color: #dc3545;
  border-color: #dc3545;
  color: white;
}

#deleteBrandModal .btn-danger:hover {
  background-color: #bb2d3b;
  border-color: #b02a37;
}

/* Loading spinner for delete button */
#deleteBrandModal .spinner-border {
  vertical-align: middle;
  margin-right: 0.5rem;
}

/* Focus states */
#deleteBrandModal .btn:focus {
  box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.25);
  outline: none;
}

/* Responsive adjustments */
@media (max-width: 576px) {
  #deleteBrandModal .modal-dialog {
    margin: 0.5rem auto;
  }
  
  #deleteBrandModal .modal-header,
  #deleteBrandModal .modal-body,
  #deleteBrandModal .modal-footer {
    padding: 1rem;
  }
}

  </style>

</head>
<body>
  <main class="main-content">
    <header class="header">
      <h1>Brand Management</h1>
      <div class="header-icons">
        <img src="https://i.pravatar.cc/40" alt="Profile">
      </div>
    </header>

    <div class="content">
      <div class="search-container">
        <form action="/admin/brand" method="GET" class="search-box">
          <i class="fas fa-search"></i>
          <input type="text" name="search" value="{{search}}" style="border-radius: 20px;" placeholder="Search products...">
          <button type="button" class="clear-btn" title="Clear" onclick="window.location.href='/admin/brand'">
            <span style="font-weight: 600;">X</span>
             <button type="submit" style="display: none;"></button>
          </button>
        </form>

        <div class="d-flex gap-2 flex-wrap">
          
             <button id="refreshBtn" class="refresh-btn" data-bs-toggle="modal" data-bs-target="#addBrandModal">
                &#43; Add Brands
            </button>
        
       
        </div>
      </div>

      <div class="table-container" >
        <table id="customerTable">
          <thead>
            <tr>
              <th>Brand</th>
              <th>Created At</th>
              <th>Status</th>
              <th>Block/Unblock</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody >
            {{#if brands.length}}
              {{#each brands}}
                <tr>
                  <td>{{this.brandName}}</td>
                  <td>{{this.createdAt}}</td> 
                  <td>
                    {{#if this.status}}
                          <span class="badge" style="color: rgb(192, 35, 11);">Blocked</span>
                        {{else}}
                          <span class="badge " style="color: rgb(23, 192, 11);">Unblocked</span>
                        {{/if}}

                  </td>
                  <td>
                    {{#if this.status}}
                          <form class="unblockBrandForm" data-id="{{this._id}}">
                                <button type="submit" class="btn btn-danger btn-sm" style="color:rgb(23, 192, 11)">Unblock</button>
                          </form>
                        {{else}}
                        <form class="blockBrandForm" data-id="{{this._id}}">
                            <button type="submit" class="btn btn-success btn-sm" style="color: rgb(192, 35, 11);">Block</button>
                        </form>

                        {{/if}}

                  </td>
                  <td class="d-flex gap-2 flex-wrap">
                    <a href="#" class="btn edit" style="color:#1916b3" onclick="openEditModal('{{this._id}}', '{{this.brandName}}')">Edit</a>
                    <a href="#" class="btn delete" style="color: red;" onclick="openDeleteModal('{{this._id}}')">Delete</a>
                  </td>
                </tr>
              {{/each}}
            {{else}}
              <tr>
                <td colspan="6" style="text-align: center; padding: 20px;">No Brands found</td>
              </tr>
            {{/if}}
          </tbody>
        </table>
      </div>

      {{#if brands.length}}
      <div class="pagination">
        {{#ifCond currentPage '>' 1}}
          <a href="?page={{decrement currentPage}}&search={{search}}" class="page-btn"><i class="fas fa-chevron-left"></i></a>
        {{else}}
          <button class="page-btn" disabled><i class="fas fa-chevron-left"></i></button>
        {{/ifCond}}

        {{#each (range 1 totalPages)}}
          {{#ifCond this '===' ../currentPage}}
            <span class="page-number current">{{this}}</span>
          {{else}}
            <a href="?page={{this}}&search={{../search}}" class="page-number">{{this}}</a>
          {{/ifCond}}
        {{/each}}

        {{#ifCond currentPage '<' totalPages}}
          <a href="?page={{increment currentPage}}&search={{search}}" class="page-btn"><i class="fas fa-chevron-right"></i></a>
        {{else}}
          <button class="page-btn" disabled><i class="fas fa-chevron-right"></i></button>
        {{/ifCond}}
      </div>
      {{/if}}
    </div>
  </main>

  <!-- Edit Product Modal -->
    <div class="modal fade" id="editBrandModal" tabindex="-1" aria-labelledby="editCategoryModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <form id="editBrandForm">
            <div class="modal-header">
              <h5 class="modal-title">Edit Brand</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">X</button>
            </div>
            <div class="modal-body">
              <input type="hidden" id="editBrandId" />
              <div class="mb-3">
                <label class="form-label">Brand Name</label>
                <input type="text" id="editBrandName" class="form-control" />
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>
          </form>
        </div>
      </div>
    </div>

  <!-- Delete Product Modal -->
  <div class="modal fade" id="deleteBrandModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <form id="deleteBrandForm">
          <div class="modal-header">
            <h5 class="modal-title">Delete Product</h5>
            <input type="hidden" id="deleteBrandId" />
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <p>Are you sure you want to delete this Brand? This action cannot be undone.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-danger" >Delete</button>
          </div>
        </form>
      </div>
    </div>
  </div>



  
  <!-- add brand Modal -->
    <div class="modal fade" id="addBrandModal" tabindex="-1" aria-labelledby="editCategoryModalLabel" aria-hidden="true">
      <div class="modal-dialog">
    <div class="modal-content">

          <form id="addBrandForm">
            <div class="modal-header">
                <h5 class="modal-title">Add new brand</h5>

              <button type="button" class="btn-close" data-bs-dismiss="modal"  aria-label="Close">X</button>
            </div>
            <div class="modal-body">
              <input type="hidden" id="addBrandId" />
              <div class="mb-3">
                <label class="form-label">Brand Name</label>
                <input type="text" id="addBrandName" class="form-control" />
                <small id="add-name-error" class="error-message" style="display: none;"></small>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"  aria-label="Close">Close</button>
              <button type="submit" class="btn btn-primary">Add</button>
            </div>
          </form>
        </div>
      </div>
    </div>

  

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>






{{#if successMessage}}
<script>
  Swal.fire({
    icon: 'success',
    title: 'Success!',
    text: '{{successMessage}}',
    confirmButtonColor: '#3085d6',
    timer: 2000,
    timerProgressBar: true
  });
</script>
{{/if}}

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
// Function to open the brand modal with optional pre-filled values
function createBrandModal(brandName = '', description = '') {
  // Reset form and clear any previous validation errors
  $('#addBrandForm')[0].reset();
  $('.error-message').hide();
  
  // Set values if provided
  $('#addBrandName').val(brandName);
  $('#addDescription').val(description);
  
  // Show modal
  $('#addBrandModal').modal('show');
}

// Form submission handler

  $('#addBrandForm').on('submit', function (e) {
    e.preventDefault();

    const brandName = $('#addBrandName').val().trim();
    
    let isValid = true;

    if (!brandName) {
      $('#addBrandName').addClass('is-invalid');
      $('#add-name-error').text('Name is required').show();
      isValid = false;
    } else {
      $('#addBrandName').removeClass('is-invalid');
      $('#add-name-error').hide();
    }


    if (!isValid) return;

    const submitBtn = $(this).find('button[type="submit"]');
    submitBtn.prop('disabled', true).html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Adding...');

    fetch('/admin/addBrand', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
       
      },
      body: JSON.stringify({
        name: brandName,       
        
      })
    })
      .then(async (response) => {
        const data = await response.json();
        if (!response.ok) {
          throw new Error(data.error || 'Failed to add brand');
        }
        return data;
      })
      .then((data) => {
        Swal.fire({
          title: 'Success!',
          text: data.message,
          icon: 'success',
          confirmButtonText: 'OK'
        }).then(() => {
          $('#addBrandModal').modal('hide');
          location.reload(); 
        });
      })
      .catch((error) => {
        Swal.fire({
          title: 'Error',
          text: error.message,
          icon: 'error',
          confirmButtonText: 'OK'
        });
      })
      .finally(() => {
        submitBtn.prop('disabled', false).text('Add');
      });
  });



// Clear validation errors when user starts typing
$('#addBrandName, #addDescription').on('input', function() {
  $(this).removeClass('is-invalid');
  if ($(this).is('#addDescription')) {
    $('#add-description-error').hide();
  }
});



function openEditModal(id, productName, regularPrice, salePrice, category) {
  $('#editBrandId').val(id);
  $('#editBrandName').val(productName);
  $('#editBrandModal').modal('show');
}

$('#editBrandForm').on('submit', function (e) {
  e.preventDefault();
  const id = $('#editBrandId').val();
  const brandName = $('#editBrandName').val().trim();
  

  if (!brandName ) {
    return Swal.fire('Error', 'All fields are required', 'error');
  }

  fetch(`/admin/editBrand/${id}`, {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ brandName})
  })
  .then(res => res.json())
  .then(data => {
    if (data.success) {
      Swal.fire('Updated!', data.message, 'success').then(() => location.reload());
    } else {
      Swal.fire('Error', data.message, 'error');
    }
  });
});

function openDeleteModal(id) {
  $('#deleteBrandId').val(id);
  $('#deleteBrandModal').modal('show');
}

$('#deleteBrandForm').on('submit', function (e) {
  e.preventDefault();
  const id = $('#deleteBrandId').val();

  fetch(`/admin/deleteBrand/${id}`, {
    method: 'DELETE'
  })
  .then(res => res.json())
  .then(data => {
    if (data.success) {
      Swal.fire('Deleted!', data.message, 'success').then(() => location.reload());
    } else {
      Swal.fire('Error', data.message, 'error');
    }
  });
});
// Block brand
$(document).on('submit', '.blockBrandForm', function (e) {
  e.preventDefault();
  const id = $(this).data('id');

  fetch(`/admin/blockBrand/${id}`, {
    method: 'POST'
  }).then(() => location.reload());
});

// Unblock brand
$(document).on('submit', '.unblockBrandForm', function (e) {
  e.preventDefault();
  const id = $(this).data('id');

  fetch(`/admin/unblockBrand/${id}`, {
    method: 'POST'
  }).then(() => location.reload());
});





</script>
