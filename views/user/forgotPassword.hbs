<head>

 <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
    }

    .container {
      max-width: 800px;
      margin: 80px auto;
      background: white;
      display: flex;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      align-items: center;
      justify-content: space-between;
      transition: all 0.3s ease;
    }

    .logo-section {
      flex: 1;
      text-align: center;
    }

    .logoImg {
      height: 15rem;
      width: 20rem;
      margin-bottom: 2px;
      object-fit: contain;
    }

    .form-section {
      flex: 1;
      padding-left: 40px;
    }

    .form-section h2 {
      margin-bottom: 10px;
      color: #1c2b6c;
    }

    .form-section p {
      font-size: 14px;
      margin-bottom: 10px;
      color: #333;
    }

    input[type="password"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }

    .error {
      color: red;
      font-size: 12px;
      margin-bottom: 10px;
      display: block;
    }

    button {
      background-color: #1c2b6c;
      color: white;
      border: none;
      padding: 10px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 10px;
      width: 100%;
      transition: background 0.3s ease;
    }

    button:hover {
      background-color: #16225a;
    }

    a {
      font-size: 13px;
      color: #ec0707;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    #errorMessage {
      color: red;
      font-size: 13px;
      margin-top: 5px;
      text-align: left;
    }

    /* ===== Responsive Styles ===== */

    /* For tablets */
    @media (max-width: 1024px) {
      .container {
        max-width: 90%;
        padding: 30px;
      }

      .logoImg {
        width: 16rem;
        height: 12rem;
      }

      .form-section {
        padding-left: 20px;
      }
    }

    /* For small tablets and mobile landscape */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding: 30px 20px;
      }

      .form-section {
        padding-left: 0;
        margin-top: 25px;
        width: 100%;
      }

      .logoImg {
        width: 12rem;
        height: 10rem;
      }

      button {
        width: 100%;
      }
    }

    /* For mobile portrait screens */
    @media (max-width: 480px) {
      .container {
        margin: 40px 10px;
        padding: 20px;
        border-radius: 12px;
      }

      .form-section h2 {
        font-size: 18px;
      }

      .form-section p {
        font-size: 13px;
      }

      input[type="password"] {
        font-size: 13px;
        padding: 8px;
      }

      .logoImg {
        width: 10rem;
        height: 8rem;
      }

      button {
        font-size: 14px;
        padding: 10px;
      }

      a {
        font-size: 12px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="logo-section">
      <img src="img/trenauraLogoBlue.png" alt="Trenaura Logo" class="logoImg" >
    </div>
{{!-- from login page --}}
    <div class="form-section">
      <h2>Change Password</h2>
      <p>Please confirm your password</p>
     
      <form id="changePasswordForm">
        <input type="password" id="password" name="password" placeholder="New password"  />
        <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm password"  />
        <button type="submit">Change Password</button>
        <p id="errorMessage" style="color: red;"></p>
        <p><a href="/login">Go back to Login page</a></p>
    </form>
    </div>
  </div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  document.getElementById("changePasswordForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const password = document.getElementById("password").value.trim();
    const confirmPassword = document.getElementById("confirmPassword").value.trim();
    const errorMessage = document.getElementById("errorMessage");

    if (!password || !confirmPassword) {
      errorMessage.textContent = "All fields are required.";
      return;
    }

    if (password !== confirmPassword) {
      errorMessage.textContent = "Passwords do not match.";
      return;
    }

    const response = await fetch("/changePassword", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ password, confirmPassword })
    });

    const result = await response.json();
    if (result.success) {
      Swal.fire({
        icon: "success",
        title: "Password Changed",
        text: "Redirecting to login...",
        showConfirmButton: false,
        timer: 2000
      }).then(() => {
        window.location.href = result.redirectUrl;
      });
    } else {
      errorMessage.textContent = result.message;
    }
  });
</script>

</body>